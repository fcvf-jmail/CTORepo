# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–¥–∏–Ω —à–∞–≥)

```bash
docker compose up --build
```

–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞:
1. ‚úÖ PostgreSQL –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤
2. ‚úÖ Web API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–µ—Ä–µ—Ç—Å—è
3. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è

## –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

### Swagger UI (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API)
```
http://localhost:5000/swagger
```

### –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã API
```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
curl http://localhost:5000/api/sections

# –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é
curl -X POST http://localhost:5000/api/articles \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ú–æ—è –ø–µ—Ä–≤–∞—è —Å—Ç–∞—Ç—å—è",
    "content": "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏",
    "tags": ["docker", "api", "aspnetcore"]
  }'

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—å—é –ø–æ ID
curl http://localhost:5000/api/articles/1
```

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)
docker compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
docker compose down -v
```

## –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker compose logs

# –° –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º
docker compose logs -f

# –¢–æ–ª—å–∫–æ Web API
docker compose logs -f webapi

# –¢–æ–ª—å–∫–æ PostgreSQL
docker compose logs -f postgres
```

## –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker compose down

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up --build
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 5000
sudo lsof -i :5000

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ docker-compose.yml
ports:
  - "9090:8080"  # –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:9090
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≥–æ—Ç–æ–≤–∞

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥ - healthcheck –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å PostgreSQL.
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
docker compose logs postgres
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Web API
docker compose logs webapi

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down -v
docker compose up --build
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
docker compose up -d

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
docker compose exec postgres psql -U postgres -d webapi

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ API
docker compose exec webapi bash

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Å—Ç—Ä–æ–∫
docker compose logs --tail=100

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫–µ—à–∞
docker compose build --no-cache
```

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

- üìñ –ß–∏—Ç–∞–π—Ç–µ [docs/DOCKER.md](docs/DOCKER.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- üìñ –ß–∏—Ç–∞–π—Ç–µ [docs/ARTICLES_API.md](docs/ARTICLES_API.md) –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API
- üîß –ò–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `docker-compose.yml` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- üîí –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª (—Å–º. `.env.example`)

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 20.10+
- Docker Compose 2.0+
- 2GB —Å–≤–æ–±–æ–¥–Ω–æ–π RAM
- 5GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

## –ü–æ—Ä—Ç—ã

- **5000** - Web API + Swagger UI
- **5432** - PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)

---

üí° **–°–æ–≤–µ—Ç:** –î–µ—Ä–∂–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!
